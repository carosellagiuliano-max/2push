-- ============================================
-- SEED DATA FOR DEVELOPMENT
-- ============================================
-- This file seeds the database with test data for development.
-- Run with: supabase db reset (which applies migrations + seed)
-- ============================================

-- ============================================
-- 1. CREATE SALON
-- ============================================

INSERT INTO salons (
  id,
  name,
  slug,
  email,
  phone,
  website,
  street,
  postal_code,
  city,
  country,
  timezone,
  currency,
  default_language,
  primary_color,
  is_active
) VALUES (
  '11111111-1111-1111-1111-111111111111',
  'SCHNITTWERK by Vanessa Carosella',
  'schnittwerk',
  'info@schnittwerk.ch',
  '+41 71 123 45 67',
  'https://schnittwerk.ch',
  'Rorschacherstrasse 152',
  '9000',
  'St. Gallen',
  'CH',
  'Europe/Zurich',
  'CHF',
  'de',
  '#b87444',
  true
);

-- ============================================
-- 2. CREATE TAX RATES
-- ============================================

-- Swiss VAT rates (as of 2024)
INSERT INTO tax_rates (id, salon_id, code, description, rate_percent, valid_from, is_default) VALUES
  ('22222222-2222-2222-2222-222222222201', '11111111-1111-1111-1111-111111111111', 'standard', 'Normalsatz 8.1%', 8.100, '2024-01-01', true),
  ('22222222-2222-2222-2222-222222222202', '11111111-1111-1111-1111-111111111111', 'reduced', 'Reduzierter Satz 2.6%', 2.600, '2024-01-01', false),
  ('22222222-2222-2222-2222-222222222203', '11111111-1111-1111-1111-111111111111', 'exempt', 'Befreit 0%', 0.000, '2024-01-01', false);

-- ============================================
-- 3. CREATE SERVICE CATEGORIES
-- ============================================

INSERT INTO service_categories (id, salon_id, name, slug, description, sort_order, is_visible) VALUES
  ('33333333-3333-3333-3333-333333333301', '11111111-1111-1111-1111-111111111111', 'Schnitt', 'schnitt', 'Haarschnitte für Damen und Herren', 1, true),
  ('33333333-3333-3333-3333-333333333302', '11111111-1111-1111-1111-111111111111', 'Coloration', 'coloration', 'Färbungen und Highlights', 2, true),
  ('33333333-3333-3333-3333-333333333303', '11111111-1111-1111-1111-111111111111', 'Styling', 'styling', 'Föhnen, Hochstecken und mehr', 3, true),
  ('33333333-3333-3333-3333-333333333304', '11111111-1111-1111-1111-111111111111', 'Pflege', 'pflege', 'Haarpflege und Treatments', 4, true);

-- ============================================
-- 4. CREATE SERVICES
-- ============================================

-- Schnitt Services
INSERT INTO services (id, salon_id, category_id, name, slug, description, duration_minutes, is_online_bookable, sort_order) VALUES
  ('44444444-4444-4444-4444-444444444401', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333301', 'Damenschnitt', 'damenschnitt', 'Waschen, Schneiden, Föhnen', 60, true, 1),
  ('44444444-4444-4444-4444-444444444402', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333301', 'Herrenschnitt', 'herrenschnitt', 'Waschen, Schneiden, Styling', 30, true, 2),
  ('44444444-4444-4444-4444-444444444403', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333301', 'Kinderschnitt', 'kinderschnitt', 'Für Kinder bis 12 Jahre', 30, true, 3);

-- Coloration Services
INSERT INTO services (id, salon_id, category_id, name, slug, description, duration_minutes, buffer_after_minutes, is_online_bookable, sort_order) VALUES
  ('44444444-4444-4444-4444-444444444404', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333302', 'Ansatzfarbe', 'ansatzfarbe', 'Nachfärben des Ansatzes', 90, 15, true, 1),
  ('44444444-4444-4444-4444-444444444405', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333302', 'Komplettfärbung', 'komplettfaerbung', 'Vollständige Coloration', 120, 15, true, 2),
  ('44444444-4444-4444-4444-444444444406', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333302', 'Highlights', 'highlights', 'Strähnchen und Highlights', 150, 15, true, 3),
  ('44444444-4444-4444-4444-444444444407', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333302', 'Balayage', 'balayage', 'Natürliche Farbverläufe', 180, 15, true, 4);

-- Styling Services
INSERT INTO services (id, salon_id, category_id, name, slug, description, duration_minutes, is_online_bookable, sort_order) VALUES
  ('44444444-4444-4444-4444-444444444408', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333303', 'Föhnen', 'foehnen', 'Waschen und Föhnen', 30, true, 1),
  ('44444444-4444-4444-4444-444444444409', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333303', 'Hochsteckfrisur', 'hochsteckfrisur', 'Festliche Hochsteckfrisur', 60, true, 2),
  ('44444444-4444-4444-4444-444444444410', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333303', 'Brautfrisur', 'brautfrisur', 'Styling für den besonderen Tag', 120, true, 3);

-- Pflege Services
INSERT INTO services (id, salon_id, category_id, name, slug, description, duration_minutes, is_online_bookable, sort_order) VALUES
  ('44444444-4444-4444-4444-444444444411', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333304', 'Intensivpflege', 'intensivpflege', 'Tiefenwirksame Haarkur', 30, true, 1),
  ('44444444-4444-4444-4444-444444444412', '11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333304', 'Olaplex Treatment', 'olaplex', 'Reparatur und Stärkung', 45, true, 2);

-- ============================================
-- 5. CREATE SERVICE PRICES
-- ============================================

INSERT INTO service_prices (service_id, tax_rate_id, price, valid_from) VALUES
  -- Schnitt
  ('44444444-4444-4444-4444-444444444401', '22222222-2222-2222-2222-222222222201', 95.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444402', '22222222-2222-2222-2222-222222222201', 55.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444403', '22222222-2222-2222-2222-222222222201', 35.00, '2024-01-01'),
  -- Coloration
  ('44444444-4444-4444-4444-444444444404', '22222222-2222-2222-2222-222222222201', 85.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444405', '22222222-2222-2222-2222-222222222201', 120.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444406', '22222222-2222-2222-2222-222222222201', 150.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444407', '22222222-2222-2222-2222-222222222201', 200.00, '2024-01-01'),
  -- Styling
  ('44444444-4444-4444-4444-444444444408', '22222222-2222-2222-2222-222222222201', 45.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444409', '22222222-2222-2222-2222-222222222201', 80.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444410', '22222222-2222-2222-2222-222222222201', 180.00, '2024-01-01'),
  -- Pflege
  ('44444444-4444-4444-4444-444444444411', '22222222-2222-2222-2222-222222222201', 35.00, '2024-01-01'),
  ('44444444-4444-4444-4444-444444444412', '22222222-2222-2222-2222-222222222201', 55.00, '2024-01-01');

-- ============================================
-- 6. CREATE OPENING HOURS
-- ============================================

-- Monday - Friday: 9:00 - 18:00 (540 - 1080 minutes)
-- Saturday: 9:00 - 16:00 (540 - 960 minutes)
-- Sunday: Closed

INSERT INTO opening_hours (salon_id, day_of_week, open_minutes, close_minutes, is_closed) VALUES
  ('11111111-1111-1111-1111-111111111111', '1', 540, 1080, false),  -- Monday
  ('11111111-1111-1111-1111-111111111111', '2', 540, 1080, false),  -- Tuesday
  ('11111111-1111-1111-1111-111111111111', '3', 540, 1080, false),  -- Wednesday
  ('11111111-1111-1111-1111-111111111111', '4', 540, 1080, false),  -- Thursday
  ('11111111-1111-1111-1111-111111111111', '5', 540, 1080, false),  -- Friday
  ('11111111-1111-1111-1111-111111111111', '6', 540, 960, false),   -- Saturday
  ('11111111-1111-1111-1111-111111111111', '7', 0, 0, true);        -- Sunday (closed)

-- ============================================
-- 7. CREATE BOOKING RULES
-- ============================================

INSERT INTO booking_rules (
  salon_id,
  min_lead_time_minutes,
  max_horizon_days,
  cancellation_cutoff_hours,
  slot_granularity_minutes,
  default_buffer_minutes,
  deposit_required_percent,
  no_show_policy,
  reservation_timeout_minutes,
  max_reservations_per_customer
) VALUES (
  '11111111-1111-1111-1111-111111111111',
  60,      -- Min 1 hour in advance
  60,      -- Max 60 days ahead
  24,      -- Cancel up to 24h before
  15,      -- 15 minute slots
  0,       -- No default buffer
  0,       -- No deposit required
  'none',  -- No no-show fee
  15,      -- 15 minute reservation timeout
  2        -- Max 2 concurrent reservations
);

-- ============================================
-- 8. CREATE STAFF (without profile_id - profiles created on auth)
-- ============================================

INSERT INTO staff (id, salon_id, display_name, title, email, color, is_bookable, sort_order, is_active) VALUES
  ('55555555-5555-5555-5555-555555555501', '11111111-1111-1111-1111-111111111111', 'Vanessa Carosella', 'Inhaberin & Stylistin', 'vanessa@schnittwerk.ch', '#b87444', true, 1, true),
  ('55555555-5555-5555-5555-555555555502', '11111111-1111-1111-1111-111111111111', 'Maria Müller', 'Senior Stylistin', 'maria@schnittwerk.ch', '#3b82f6', true, 2, true),
  ('55555555-5555-5555-5555-555555555503', '11111111-1111-1111-1111-111111111111', 'Lisa Schmidt', 'Stylistin', 'lisa@schnittwerk.ch', '#10b981', true, 3, true);

-- ============================================
-- 9. CREATE STAFF WORKING HOURS
-- ============================================

-- Vanessa: Mon-Fri 9:00-18:00, Sat 9:00-14:00
INSERT INTO staff_working_hours (staff_id, day_of_week, start_minutes, end_minutes) VALUES
  ('55555555-5555-5555-5555-555555555501', '1', 540, 1080),
  ('55555555-5555-5555-5555-555555555501', '2', 540, 1080),
  ('55555555-5555-5555-5555-555555555501', '3', 540, 1080),
  ('55555555-5555-5555-5555-555555555501', '4', 540, 1080),
  ('55555555-5555-5555-5555-555555555501', '5', 540, 1080),
  ('55555555-5555-5555-5555-555555555501', '6', 540, 840);

-- Maria: Tue-Sat
INSERT INTO staff_working_hours (staff_id, day_of_week, start_minutes, end_minutes) VALUES
  ('55555555-5555-5555-5555-555555555502', '2', 540, 1080),
  ('55555555-5555-5555-5555-555555555502', '3', 540, 1080),
  ('55555555-5555-5555-5555-555555555502', '4', 540, 1080),
  ('55555555-5555-5555-5555-555555555502', '5', 540, 1080),
  ('55555555-5555-5555-5555-555555555502', '6', 540, 960);

-- Lisa: Mon, Wed, Fri, Sat
INSERT INTO staff_working_hours (staff_id, day_of_week, start_minutes, end_minutes) VALUES
  ('55555555-5555-5555-5555-555555555503', '1', 540, 1080),
  ('55555555-5555-5555-5555-555555555503', '3', 540, 1080),
  ('55555555-5555-5555-5555-555555555503', '5', 540, 1080),
  ('55555555-5555-5555-5555-555555555503', '6', 540, 960);

-- ============================================
-- 10. CREATE STAFF SERVICE SKILLS
-- ============================================

-- Vanessa can do all services
INSERT INTO staff_service_skills (staff_id, service_id) VALUES
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444401'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444402'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444403'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444404'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444405'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444406'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444407'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444408'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444409'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444410'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444411'),
  ('55555555-5555-5555-5555-555555555501', '44444444-4444-4444-4444-444444444412');

-- Maria: All except Brautfrisur
INSERT INTO staff_service_skills (staff_id, service_id) VALUES
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444401'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444402'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444403'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444404'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444405'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444406'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444408'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444409'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444411'),
  ('55555555-5555-5555-5555-555555555502', '44444444-4444-4444-4444-444444444412');

-- Lisa: Schnitt, Styling, Pflege (no Coloration)
INSERT INTO staff_service_skills (staff_id, service_id) VALUES
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444401'),
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444402'),
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444403'),
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444408'),
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444409'),
  ('55555555-5555-5555-5555-555555555503', '44444444-4444-4444-4444-444444444411');

-- ============================================
-- NOTES FOR DEVELOPMENT
-- ============================================
--
-- Admin user must be created through Supabase Auth:
-- 1. Create user via supabase.auth.signUp or Studio
-- 2. Add entry to user_roles with role_name = 'admin'
--
-- Example (after creating auth user):
-- INSERT INTO user_roles (profile_id, salon_id, role_name)
-- VALUES ('<user-uuid>', '11111111-1111-1111-1111-111111111111', 'admin');
--
-- Test customer can be created similarly with role_name = 'kunde'
